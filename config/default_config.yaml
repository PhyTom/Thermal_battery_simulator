# Configurazione di default per la simulazione Sand Battery
# Valori basati su impianto reale Pornainen (Finlandia)

# ============================================
# PARAMETRI OPERATIVI
# ============================================
operating_parameters:
  T_max: 380.0          # °C - Temperatura massima operativa
  T_min: 90.0           # °C - Temperatura minima (scarica completa)
  T_ambient: 20.0       # °C - Temperatura ambiente
  T_ground: 10.0        # °C - Temperatura terreno
  efficiency: 0.87      # Efficienza round-trip

# ============================================
# GEOMETRIA BATTERIA
# ============================================
geometry:
  # Dimensioni complessive del dominio (cubo contenitore)
  Lx: 10.0              # m - Dimensione X
  Ly: 10.0              # m - Dimensione Y
  Lz: 8.0               # m - Altezza totale
  
  # Cilindro interno (batteria vera e propria)
  cylinder:
    radius: 4.0         # m - Raggio esterno del cilindro
    height: 7.0         # m - Altezza della sabbia
    center_x: 5.0       # m - Centro X
    center_y: 5.0       # m - Centro Y
    base_z: 0.5         # m - Quota base (sopra fondazione)
  
  # Spessori delle zone radiali
  layers:
    tubes_inner: 0.5    # m - Raggio zona tubi centrali
    sand_inner: 1.5     # m - Raggio sabbia interna
    heaters: 0.3        # m - Spessore zona resistenze
    sand_outer: 1.0     # m - Spessore sabbia esterna
    insulation: 0.5     # m - Spessore isolamento
    steel_shell: 0.01   # m - Spessore guscio acciaio

# ============================================
# MESH
# ============================================
mesh:
  # Risoluzione (numero di celle per direzione)
  Nx: 50
  Ny: 50
  Nz: 40
  
  # Raffinamento locale (opzionale)
  refinement:
    enable: false
    zones: []

# ============================================
# MATERIALI
# ============================================
materials:
  # Materiale di stoccaggio principale
  storage_material: "steatite"
  
  # Porosità del letto di sabbia/rocce
  packing_fraction: 0.63
  
  # Isolamento
  insulation_material: "lana_roccia"
  
  # Struttura
  shell_material: "acciaio_al_carbonio"

# ============================================
# CONDIZIONI AL CONTORNO
# ============================================
boundary_conditions:
  # Superficie superiore (aria)
  top:
    type: "convection"
    h: 10.0             # W/(m²·K) - Coefficiente convettivo
    T_inf: 20.0         # °C
  
  # Superficie laterale esterna
  lateral:
    type: "convection"
    h: 5.0
    T_inf: 20.0
  
  # Base (terreno)
  bottom:
    type: "fixed_temperature"
    T: 10.0             # °C
  
  # Tubi scambiatori (quando attivi)
  tubes:
    type: "convection"
    h: 500.0            # W/(m²·K) - Convezione forzata acqua
    T_fluid: 60.0       # °C - Temperatura fluido in ingresso

# ============================================
# SORGENTI DI CALORE
# ============================================
heat_sources:
  # Resistenze elettriche
  heaters:
    power_total: 100.0  # kW - Potenza totale installata
    distribution: "uniform"  # uniform, linear, custom
  
  # Reazione esotermica (se presente)
  reaction:
    enable: false
    Q_volumetric: 0.0   # W/m³

# ============================================
# SOLVER
# ============================================
solver:
  # Tipo di analisi
  type: "steady_state"  # steady_state, transient
  
  # Parametri solutore iterativo
  iterative:
    method: "bicgstab"  # cg, gmres, bicgstab
    tolerance: 1.0e-6
    max_iterations: 10000
    preconditioner: "ilu"
  
  # Parametri transitorio
  transient:
    dt: 60.0            # s - Passo temporale
    t_end: 3600.0       # s - Tempo finale
    output_interval: 300.0  # s - Intervallo salvataggio

# ============================================
# OUTPUT
# ============================================
output:
  # Directory risultati
  directory: "results"
  
  # Formati
  save_vtk: true
  save_csv: true
  
  # Piani di sezione per export
  slices:
    - axis: "z"
      position: 4.0     # m - Sezione orizzontale a metà altezza
    - axis: "x"
      position: 5.0     # m - Sezione verticale Y-Z
    - axis: "y"
      position: 5.0     # m - Sezione verticale X-Z

# ============================================
# VISUALIZZAZIONE
# ============================================
visualization:
  colormap: "coolwarm"
  T_min_display: 0.0    # °C - Limite inferiore colorbar
  T_max_display: 400.0  # °C - Limite superiore colorbar
  opacity: 0.8
  show_mesh: false
  show_axes: true
